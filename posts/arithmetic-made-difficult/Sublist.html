<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>nbloomf.blog - Sublist</title>
<link rel="stylesheet" type="text/css" href="../../css/default.css" />
<link rel="icon" href="../../raw/gfx/icon/favicon-32.png" />
<link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../raw/gfx/icon/favicon-57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../raw/gfx/icon/favicon-114.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../raw/gfx/icon/favicon-152.png" />
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>

<body>
<div id="header">
  <div id="logo">
    <a href="../../index.html">nbloomf</a>
  </div>
  <div id="navigation">
    <a href="../../index.html">Home</a>
    <a href="../../pages/about.html">About</a>
    <a href="../../pages/projects.html">Projects</a>
    <a href="../../pages/contact.html">Contact</a>
    <a href="../../archive.html">Blog</a>
  </div>
</div>

<div id="content">
<h1>Sublist</h1>
<!-- BEGIN BODY -->


<div class="info">
Posted on 2017-05-23 by nbloomf
</div>


<div class="info tags">Tags: <a href="../../tag/arithmetic-made-difficult.html">arithmetic-made-difficult</a>, <a href="../../tag/literate-haskell.html">literate-haskell</a></div>


<!-- LaTeX Macros for Arithmetic Made Difficult -->
<div class="invisible">
<!-- basic maps -->
\(\newcommand{\id}{\mathsf{id}}\)
\(\newcommand{\const}{\mathsf{const}}\)

<!-- booleans -->
\(\newcommand{\bool}{\mathbb{B}}\)
\(\newcommand{\btrue}{\mathsf{true}}\)
\(\newcommand{\bfalse}{\mathsf{false}}\)
\(\newcommand{\bnot}{\mathsf{not}}\)
\(\newcommand{\band}{\mathbin{\mathsf{and}}}\)
\(\newcommand{\bor}{\mathbin{\mathsf{or}}}\)
\(\newcommand{\beq}{\mathsf{eq}}\)
\(\newcommand{\bif}[3]{\mathsf{if}\left(#1,#2,#3\right)}\)

<!-- tuples -->
\(\newcommand{\fst}{\mathsf{first}}\)
\(\newcommand{\snd}{\mathsf{second}}\)
\(\newcommand{\dup}{\mathsf{dup}}\)
\(\newcommand{\swap}{\mathsf{swap}}\)
\(\newcommand{\pair}{\mathsf{pair}}\)
\(\newcommand{\assocL}{\mathsf{assocL}}\)
\(\newcommand{\assocR}{\mathsf{assocR}}\)

<!-- natural numbers -->
\(\newcommand{\nats}{\mathbb{N}}\)
\(\newcommand{\zero}{\mathsf{0}}\)
\(\newcommand{\next}{\mathsf{next}}\)
\(\newcommand{\iszero}{\mathsf{isZero}}\)
\(\newcommand{\prev}{\mathsf{prev}}\)
\(\newcommand{\natrec}[2]{\left\langle\!\left\vert #1, #2 \right\vert\!\right\rangle}\)
\(\newcommand{\simprec}[2]{\left[\!\left[ #1, #2 \right]\!\right]}\)
\(\newcommand{\bailrec}[4]{\left(\!\left[ #1, #2, #3, #4 \right]\!\right)}\)
\(\newcommand{\mutrec}[3]{\left\{\!\left[ #1, #2, #3 \right]\!\right\}}\)

<!--- natural number arithmetic ---->
\(\newcommand{\nequal}{\mathsf{eq}}\)
\(\newcommand{\nplus}{\mathsf{plus}}\)
\(\newcommand{\ntimes}{\mathsf{times}}\)
\(\newcommand{\nleq}{\mathsf{leq}}\)
\(\newcommand{\ngeq}{\mathsf{geq}}\)
\(\newcommand{\nminus}{\mathsf{minus}}\)
\(\newcommand{\nmax}{\mathsf{max}}\)
\(\newcommand{\nmin}{\mathsf{min}}\)
\(\newcommand{\ndivalg}{\mathsf{divalg}}\)
\(\newcommand{\nquo}{\mathsf{quo}}\)
\(\newcommand{\nrem}{\mathsf{rem}}\)
\(\newcommand{\ndiv}{\mathsf{div}}\)
\(\newcommand{\ngcd}{\mathsf{gcd}}\)
\(\newcommand{\ncoprime}{\mathsf{coprime}}\)
\(\newcommand{\nlcm}{\mathsf{lcm}}\)
\(\newcommand{\nmindiv}{\mathsf{mindiv}}\)
\(\newcommand{\nisprime}{\mathsf{isPrime}}\)
\(\newcommand{\npower}{\mathsf{power}}\)
\(\newcommand{\nchoose}{\mathsf{choose}}\)

<!-- categories -->
\(\newcommand{\dom}{\mathsf{dom}}\)
\(\newcommand{\cod}{\mathsf{cod}}\)

<!-- list -->
\(\newcommand{\nil}{\mathsf{nil}}\)
\(\newcommand{\cons}{\mathsf{cons}}\)
\(\newcommand{\lists}[1]{\mathsf{List}(#1)}\)
\(\newcommand{\foldr}[2]{\mathsf{foldr}(#1,#2)}\)
\(\newcommand{\uncons}{\mathsf{uncons}}\)
\(\newcommand{\isnil}{\mathsf{isNil}}\)
\(\newcommand{\tail}{\mathsf{tail}}\)
\(\newcommand{\snoc}{\mathsf{snoc}}\)
\(\newcommand{\rev}{\mathsf{rev}}\)
\(\newcommand{\foldl}[2]{\mathsf{foldl}(#1,#2)}\)
\(\newcommand{\cat}{\mathsf{cat}}\)
\(\newcommand{\length}{\mathsf{length}}\)
\(\newcommand{\head}{\mathsf{head}}\)
\(\newcommand{\at}{\mathsf{at}}\)
\(\newcommand{\map}{\mathsf{map}}\)
\(\newcommand{\unfoldN}{\mathsf{unfoldN}}\)
\(\newcommand{\range}{\mathsf{range}}\)
\(\newcommand{\zip}{\mathsf{zip}}\)
\(\newcommand{\zipPad}{\mathsf{zipPad}}\)
\(\newcommand{\unzip}{\mathsf{unzip}}\)
\(\newcommand{\prefix}{\mathsf{prefix}}\)
\(\newcommand{\suffix}{\mathsf{suffix}}\)
\(\newcommand{\lcp}{\mathsf{lcp}}\)
\(\newcommand{\lcs}{\mathsf{lcs}}\)
\(\newcommand{\all}{\mathsf{all}}\)
\(\newcommand{\any}{\mathsf{any}}\)
\(\newcommand{\tails}{\mathsf{tails}}\)
\(\newcommand{\inits}{\mathsf{inits}}\)
\(\newcommand{\filter}{\mathsf{filter}}\)
\(\newcommand{\elt}{\mathsf{elt}}\)
\(\newcommand{\count}{\mathsf{count}}\)
\(\newcommand{\repeat}{\mathsf{repeat}}\)
\(\newcommand{\sublist}{\mathsf{sublist}}\)
\(\newcommand{\infix}{\mathsf{infix}}\)
\(\newcommand{\select}{\mathsf{select}}\)
\(\newcommand{\unique}{\mathsf{unique}}\)
\(\newcommand{\delete}{\mathsf{delete}}\)
\(\newcommand{\dedupeL}{\mathsf{dedupeL}}\)
\(\newcommand{\dedupeR}{\mathsf{dedupeR}}\)
\(\newcommand{\take}{\mathsf{take}}\)
\(\newcommand{\drop}{\mathsf{drop}}\)
</div>
<!-- End LaTeX Macros for Arithmetic Made Difficult -->

<p>This page is part of a series on <a href="../../pages/amd.html">Arithmetic Made Difficult</a>.</p>

<p>This post is literate Haskell; you can load <a href="https://raw.githubusercontent.com/nbloomf/nbloomf.md/master/posts/arithmetic-made-difficult/Sublist.lhs">the source</a> into GHCi and play along.</p>

<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> <span class="kw">module</span> <span class="dt">Sublist</span>
<span class="ot">&gt;</span>   ( sublist, _test_sublist, main_sublist
<span class="ot">&gt;</span>   ) <span class="kw">where</span>
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Booleans</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Tuples</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">NaturalNumbers</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Plus</span>
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Lists</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Reverse</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Length</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Map</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Cat</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">UnfoldN</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Zip</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Prefix</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">AllAndAny</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">TailsAndInits</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Filter</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Elt</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Count</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Repeat</span>
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Prelude</span> ()
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Test.QuickCheck</span>
<span class="ot">&gt;</span> <span class="kw">import </span><span class="dt">Text.Show.Functions</span></code></pre></div>
<p>Today we’ll nail down what it means for one list to be a <em>sublist</em> of another. Intuitively, a sublist is “part of” some larger list; but there is some ambiguity here: does the sublist have to be contiguous in the larger list? For example, it seems clear that <span class="math display">\[\langle b, c \rangle\]</span> should be considered a sublist of <span class="math display">\[\langle a, b, c, d, e \rangle\]</span> while <span class="math display">\[\langle e, g \rangle\]</span> should not. But what about <span class="math display">\[\langle a, c \rangle,\]</span> or even <span class="math display">\[\langle c, a \rangle\]</span> for that matter? First, lists are inherently ordered, so the “sublist” idea should reflect this – sublists have to respect the order of their superlists. On the other hand, it is less crucial that sublists be contiguous in their superlists. Contiguous sublists are still interesting though (for reasons we’ll see later), so we will single them out as infixes (analogous to prefixes and suffixes).</p>
<p>So we have two related but distinct concepts, sublists and infixes, that will need to be dealt with separately. We’ll define two boolean functions, <span class="math inline">\(\sublist\)</span> and <span class="math inline">\(\infix\)</span>, which detect when one list is a sublist or infix (respectively) of another. We’ll start with <span class="math inline">\(\sublist\)</span>. This function should have a signature like <span class="math display">\[\lists{A} \times \lists{A} \rightarrow \bool.\]</span> Taking a cue from functions with similar signatures like <span class="math inline">\(\zip\)</span> and <span class="math inline">\(\prefix\)</span>, we could try to define <span class="math inline">\(\sublist\)</span> as a right fold like <span class="math display">\[\sublist(x,y) = \foldr{\varepsilon}{\varphi}(x)(y)\]</span> where <span class="math display">\[\varepsilon : \lists{A} \rightarrow \bool\]</span> and <span class="math display">\[\varphi : A \times (\lists{A} \rightarrow \bool) \rightarrow \lists{A} \rightarrow \bool.\]</span> But if we do this, assuming some reasonable behavior for <span class="math inline">\(\sublist\)</span>, we get stuck! (Try it!) What happens is that the fold eats <span class="math inline">\(x\)</span>, but when <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> are not nil but have different first items we need the recursion to un-eat the <span class="math inline">\(x\)</span> parameter. The fix is to instead fold on <span class="math inline">\(y\)</span> like <span class="math display">\[\sublist(x,y) = \foldr{\varepsilon}{\varphi}(y,x).\]</span></p>
<p>Blah blah, define <span class="math inline">\(\sublist\)</span> like this.</p>
<div class="result">
<div class="defn">
<p>
Let <span class="math inline">\(A\)</span> be a set. Define <span class="math inline">\(\varphi : A \times \bool^{\lists{A}} \rightarrow \bool^{\lists{A}}\)</span> by <span class="math display">\[\varphi(a,f)(x) = \left\{\begin{array}{ll} \btrue &amp; \mathrm{if}\ x = \nil \\ \bif{\beq(a,b)}{f(w)}{f(x)} &amp; \mathrm{if}\ x = \cons(b,w). \end{array}\right.\]</span> Now define <span class="math inline">\(\sublist : \lists{A} \times \lists{A} \rightarrow \bool\)</span> by <span class="math display">\[\sublist(x,y) = \foldr{\isnil}{\varphi}(y)(x).\]</span>
</p>
</div>
</div>
<p>We can translate the definition of <span class="math inline">\(\sublist\)</span> to Haskell:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; sublist' ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a) <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="ot">&gt;</span> sublist' x y <span class="fu">=</span> foldr isNil phi y x
<span class="ot">&gt;</span>   <span class="kw">where</span>
<span class="ot">&gt;</span>     phi a f w <span class="fu">=</span> <span class="kw">case</span> listShape w <span class="kw">of</span>
<span class="ot">&gt;</span>       <span class="dt">Nil</span>      <span class="ot">-&gt;</span> <span class="dt">True</span>
<span class="ot">&gt;</span>       <span class="dt">Cons</span> b u <span class="ot">-&gt;</span> <span class="kw">if</span> eq a b <span class="kw">then</span> f u <span class="kw">else</span> f w</code></pre></div>
<p>The following result suggests an alternative implementation.</p>
<div class="result">
<div class="thm">
<p>
<p>Let <span class="math inline">\(A\)</span> be a set. For all <span class="math inline">\(a,b \in A\)</span> and <span class="math inline">\(x,y \in \lists{A}\)</span> we have the following.</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(\sublist(x,\nil) = \isnil(x)\)</span>.</li>
<li><span class="math inline">\(\sublist(\nil,y) = \btrue\)</span>.</li>
<li><span class="math display">\[\sublist(\cons(a,x),\cons(b,y)) = \left\{ \begin{array}{ll} \sublist(x,y) &amp; \mathrm{if}\ a = b \\ \sublist(\cons(a,x),y) &amp; \mathrm{otherwise}. \end{array} \right.\]</span></li>
</ol>
</p>
</div>
<div class="proof">
<p>
<ol style="list-style-type: decimal">
<li>Note that <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(x,\nil) \\
 &amp; = &amp; \foldr{\isnil}{\varphi}(\nil)(x) \\
 &amp; = &amp; \isnil(x)
\end{eqnarray*}\]</span> as claimed.</li>
<li>We consider two cases for <span class="math inline">\(y\)</span>. If <span class="math inline">\(y = \nil\)</span>, certainly <span class="math display">\[\sublist(\nil,\nil) = \btrue\]</span> by (1). If <span class="math inline">\(y = \cons(b,w)\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\nil,\cons(b,w)) \\
 &amp; = &amp; \foldr{\isnil}{\varphi}(\cons(b,w))(\nil) \\
 &amp; = &amp; \varphi(b,\foldr{\isnil}{\varphi}(w))(\nil) \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as claimed.</li>
<li>Note that <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\cons(a,x),\cons(b,y)) \\
 &amp; = &amp; \foldr{\isnil}{\varphi}(\cons(b,y))(\cons(a,x)) \\
 &amp; = &amp; \varphi(b,\foldr{\isnil}{\varphi}(y))(\cons(a,x)) \\
 &amp; = &amp; \bif{\beq(a,b)}{\foldr{\isnil}{\varphi}(y)(x)}{\foldr{\isnil}{\varphi}(y)(\cons(a,x))} \\
 &amp; = &amp; \bif{\beq(a,b)}{\sublist(x,y)}{\sublist(\cons(a,x),y)}
\end{eqnarray*}\]</span> as claimed.</li>
</ol>
</p>
</div>
</div>
<p>In Haskell:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; sublist ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a) <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="ot">&gt;</span> sublist x y <span class="fu">=</span> <span class="kw">case</span> listShape x <span class="kw">of</span>
<span class="ot">&gt;</span>   <span class="dt">Nil</span>      <span class="ot">-&gt;</span> <span class="dt">True</span>
<span class="ot">&gt;</span>   <span class="dt">Cons</span> a u <span class="ot">-&gt;</span> <span class="kw">case</span> listShape y <span class="kw">of</span>
<span class="ot">&gt;</span>     <span class="dt">Nil</span>      <span class="ot">-&gt;</span> <span class="dt">False</span>
<span class="ot">&gt;</span>     <span class="dt">Cons</span> b v <span class="ot">-&gt;</span> <span class="kw">if</span> eq a b
<span class="ot">&gt;</span>       <span class="kw">then</span> sublist u v
<span class="ot">&gt;</span>       <span class="kw">else</span> sublist x v</code></pre></div>
<p>A lemma.</p>
<div class="result">
<div class="thm">
<p>
Let <span class="math inline">\(A\)</span> be a set with <span class="math inline">\(a \in A\)</span> and <span class="math inline">\(x,y \in \lists{A}\)</span>. Then <span class="math display">\[\sublist(x,y) = \sublist(\cons(a,x),\cons(a,y)).\]</span>
</p>
</div>
<div class="proof">
<p>
Note that <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\cons(a,x),\cons(a,y)) \\
 &amp; = &amp; \bif{\beq(a,a)}{\sublist(x,y)}{\sublist(\cons(a,x),y)} \\
 &amp; = &amp; \sublist(x,y)
\end{eqnarray*}\]</span> as claimed.
</p>
</div>
</div>
<p>Another lemma. This one seems like it should be obvious, but the only proof I could find was kind of complicated – nested induction of two statements at once.</p>
<div class="result">
<div class="thm">
<p>
<p>Let <span class="math inline">\(A\)</span> be a set with <span class="math inline">\(a,b \in A\)</span> and <span class="math inline">\(x,y \in \lists{A}\)</span>. Then we have the following.</p>
<ol style="list-style-type: decimal">
<li>If <span class="math inline">\(\sublist(x,y) = \btrue\)</span>, then <span class="math inline">\(\sublist(x,\cons(b,y)) = \btrue\)</span>.</li>
<li>If <span class="math inline">\(\sublist(\cons(a,x),y) = \btrue\)</span>, then <span class="math inline">\(\sublist(x,y) = \btrue\)</span>.</li>
</ol>
</p>
</div>
<div class="proof">
<p>
<p>This proof is a little different: we will prove both (1) and (2) simultaneously by list induction on <span class="math inline">\(x\)</span>. For the base case <span class="math inline">\(x = \nil\)</span>, to see (1), note that for all <span class="math inline">\(b \in A\)</span> and <span class="math inline">\(y \in \lists{A}\)</span> we have <span class="math display">\[\sublist(\nil,y) = \btrue = \sublist(\nil,\cons(b,y))\]</span> as needed. To see (2), note that <span class="math inline">\(\sublist(\nil,y)\)</span>, so the implication holds regardless of the values of <span class="math inline">\(a\)</span> and <span class="math inline">\(x\)</span>.</p>
<p>For the inductive step, suppose both (1) and (2) hold for all <span class="math inline">\(a,b \in A\)</span> and <span class="math inline">\(y \in \lists{A}\)</span> for some <span class="math inline">\(x \in \lists{A}\)</span>, and let <span class="math inline">\(c \in A\)</span>.</p>
<p>Now we claim that (1) holds with <span class="math inline">\(x\)</span> replaced by <span class="math inline">\(\cons(c,x)\)</span>; that is, for all <span class="math inline">\(b \in A\)</span> and <span class="math inline">\(y \in \lists{A}\)</span>, if <span class="math inline">\(\sublist(\cons(c,x),y) = \btrue\)</span> then <span class="math inline">\(\sublist(\cons(c,x),\cons(b,y)) = \btrue\)</span>. To this end, suppose we have <span class="math inline">\(\sublist(\cons(c,x),y) = \btrue\)</span>. Using part (2) of the induction hypothesis, we have <span class="math inline">\(\sublist(x,y) = \btrue\)</span>. Now <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\cons(c,x),\cons(b,y)) \\
 &amp; = &amp; \bif{\beq(c,b)}{\sublist(x,y)}{\sublist(\cons(c,x),y)} \\
 &amp; = &amp; \bif{\beq(c,b)}{\btrue}{\btrue} \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as needed.</p>
<p>Next we claim that (2) holds with <span class="math inline">\(x\)</span> replaced by <span class="math inline">\(\cons(c,x)\)</span>. That is, for all <span class="math inline">\(a \in A\)</span> and <span class="math inline">\(y \in \lists{A}\)</span>, if <span class="math inline">\(\sublist(\cons(a,\cons(c,x)),y) = \btrue\)</span> then <span class="math inline">\(\sublist(\cons(c,x),y) = \btrue\)</span>. We proceed by list induction on <span class="math inline">\(y\)</span>. For the base case <span class="math inline">\(y = \nil\)</span>, note that <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\cons(a,\cons(c,x)),y) \\
 &amp; = &amp; \sublist(\cons(a,\cons(c,x)),\nil) \\
 &amp; = &amp; \isnil(\cons(a,\cons(c,x))) \\
 &amp; = &amp; \bfalse;
\end{eqnarray*}\]</span> thus the implication (2) holds vacuously.</p>
<p>For the inductive step, suppose we have <span class="math inline">\(y \in \lists{A}\)</span> such that, for all <span class="math inline">\(a \in A\)</span>, if <span class="math inline">\(\sublist(\cons(a,\cons(c,x)),y) = \btrue\)</span> then <span class="math inline">\(\sublist(\cons(c,x),y) = \btrue\)</span>. Let <span class="math inline">\(d \in A\)</span>, and suppose <span class="math display">\[\sublist(\cons(a,\cons(c,x)),\cons(d,y)) = \btrue.\]</span></p>
We consider two possibilities. If <span class="math inline">\(a \neq d\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cons(a,\cons(c,x)),\cons(d,y)) \\
 &amp; = &amp; \sublist(\cons(a,\cons(c,x)),y).
\end{eqnarray*}\]</span> By the (nested) induction hypothesis, we have <span class="math display">\[\sublist(\cons(c,x),y) = \btrue.\]</span> We established above that this implies <span class="math display">\[\sublist(\cons(c,x),\cons(d,y)) = \btrue\]</span> as needed. Now suppose instead that <span class="math inline">\(a = d\)</span>. Then <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cons(a,\cons(c,x)),\cons(d,y)) \\
 &amp; = &amp; \sublist(\cons(c,x),y).
\end{eqnarray*}\]</span> By part (2) of the (outer) induction hypothesis, we have <span class="math display">\[\sublist(x,y) = \btrue.\]</span> Now <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\cons(c,x),\cons(d,y)) \\
 &amp; = &amp; \bif{\beq(c,d)}{\sublist(x,y)}{\sublist(\cons(c,x),y)} \\
 &amp; = &amp; \bif{\beq(c,d)}{\btrue}{\btrue} \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as needed.
</p>
</div>
</div>
<p>Now <span class="math inline">\(\sublist\)</span> interacts with <span class="math inline">\(\length\)</span>:</p>
<div class="result">
<div class="thm">
<p>
Let <span class="math inline">\(A\)</span> be a set, with <span class="math inline">\(x,y \in \lists{A}\)</span>. If <span class="math inline">\(\sublist(x,y) = \btrue\)</span>, then <span class="math inline">\(\nleq(\length(x),\length(y))\)</span>.
</p>
</div>
<div class="proof">
<p>
We proceed by list induction on <span class="math inline">\(y\)</span>. For the base case <span class="math inline">\(y = \nil\)</span>, note that <span class="math inline">\(\length(y) = \zero\)</span>. Now if <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(x,y) \\
 &amp; = &amp; \sublist(x,\nil) \\
 &amp; = &amp; \isnil(x),
\end{eqnarray*}\]</span> we have <span class="math inline">\(x = \nil\)</span>, so that <span class="math inline">\(\length(x) = \zero\)</span>. Thus <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \nleq(\length(x),\length(y)) \\
 &amp; = &amp; \nleq(\zero,\zero) \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as needed. For the inductive step, suppose the implication holds for all <span class="math inline">\(x\)</span> for some <span class="math inline">\(y\)</span>, and let <span class="math inline">\(b \in A\)</span>. We consider two cases for <span class="math inline">\(x\)</span>. If <span class="math inline">\(x = \nil\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(x,\cons(b,y)) \\
 &amp; = &amp; \sublist(\nil,\cons(b,y)) \\
 &amp; = &amp; \btrue,
\end{eqnarray*}\]</span> and furthermore <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \nleq(\length(x),\length(\cons(b,y))) \\
 &amp; = &amp; \nleq(\length(\nil),\length(\cons(b,y))) \\
 &amp; = &amp; \nleq(\zero,\length(\cons(b,y)))
\end{eqnarray*}\]</span> as needed. Suppose then that <span class="math inline">\(x = \cons(a,u)\)</span>, and suppose further that <span class="math inline">\(\sublist(x,\cons(b,y)) = \btrue\)</span>. We have two possibilities. If <span class="math inline">\(a = b\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(x,\cons(b,y)) \\
 &amp; = &amp; \sublist(\cons(a,u),\cons(b,y)) \\
 &amp; = &amp; \sublist(u,y).
\end{eqnarray*}\]</span> By the induction hypothesis, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \nleq(\length(u),\length(y)) \\
 &amp; = &amp; \nleq(\next(\length(u)),\next(\length(y))) \\
 &amp; = &amp; \nleq(\length(\cons(a,u)),\length(\cons(b,y))) \\
 &amp; = &amp; \nleq(\length(x),\length(\cons(b,y)))
\end{eqnarray*}\]</span> as needed. If <span class="math inline">\(a \neq b\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(x,\cons(b,y)) \\
 &amp; = &amp; \sublist(\cons(a,u),\cons(b,y)) \\
 &amp; = &amp; \sublist(\cons(a,u),y).
\end{eqnarray*}\]</span> By the induction hypothesis, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \nleq(\length(\cons(a,u)),\length(y)) \\
 &amp; = &amp; \nleq(\length(x),\length(y)) \\
 &amp; = &amp; \nleq(\length(x),\next(\length(y))) \\
 &amp; = &amp; \nleq(\length(x),\length(\cons(b,y)))
\end{eqnarray*}\]</span> as needed.
</p>
</div>
</div>
<p><span class="math inline">\(\sublist\)</span> is a partial order:</p>
<div class="result">
<div class="thm">
<p>
<p>Let <span class="math inline">\(A\)</span> be a set. For all <span class="math inline">\(x,y,z \in \lists{A}\)</span> we have the following.</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(\sublist(x,x)\)</span>.</li>
<li>If <span class="math inline">\(\sublist(x,y)\)</span> and <span class="math inline">\(\sublist(y,z)\)</span>, then <span class="math inline">\(x = y\)</span>.</li>
<li>If <span class="math inline">\(\sublist(x,y)\)</span> and <span class="math inline">\(\sublist(y,z)\)</span>, then <span class="math inline">\(\sublist(x,z)\)</span>.</li>
</ol>
</p>
</div>
<div class="proof">
<p>
<ol style="list-style-type: decimal">
<li>We proceed by list induction on <span class="math inline">\(x\)</span>. For the base case <span class="math inline">\(x = \nil\)</span>, certainly <span class="math display">\[\sublist(\nil,\nil) = \btrue.\]</span> For the inductive step, suppose the equality holds for some <span class="math inline">\(x\)</span> and let <span class="math inline">\(a \in A\)</span>. Now <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\cons(a,x),\cons(a,x)) \\
 &amp; = &amp; \bif{\beq(a,a)}{\sublist(x,x)}{\sublist(\cons(a,x),x)} \\
 &amp; = &amp; \sublist(x,x) \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as needed.</li>
<li>We proceed by list induction on <span class="math inline">\(x\)</span>. For the base case <span class="math inline">\(x = \nil\)</span>, note that <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(y,x) \\
 &amp; = &amp; \sublist(y,\nil) \\
 &amp; = &amp; \isnil(y),
\end{eqnarray*}\]</span> so that <span class="math inline">\(y = \nil = x\)</span> as claimed. For the inductive step, suppose the implication holds for some <span class="math inline">\(x\)</span> and let <span class="math inline">\(a \in A\)</span>. We now consider two possibilities for <span class="math inline">\(y\)</span>. If <span class="math inline">\(y = \nil\)</span>, note that <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\cons(a,x),y) \\
 &amp; = &amp; \sublist(\cons(a,x),\nil) \\
 &amp; = &amp; \isnil(\cons(a,x)) \\
 &amp; = &amp; \bfalse.
\end{eqnarray*}\]</span> Thus the implication holds vacuously. Suppose instead that <span class="math inline">\(y = \cons(b,v)\)</span>, and suppose further that <span class="math inline">\(\sublist(\cons(a,x),\cons(b,v))\)</span> and <span class="math inline">\(\sublist(\cons(b,v),\cons(a,x))\)</span> are both <span class="math inline">\(\btrue\)</span>. If <span class="math inline">\(a \neq b\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cons(b,v),\cons(a,x)) \\
 &amp; = &amp; \sublist(\cons(b,v),x) \\
 &amp; = &amp; \sublist(y,x).
\end{eqnarray*}\]</span> But now we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \nleq(\length(\cons(a,x)),\length(y)) \\
 &amp; = &amp; \nleq(\next(\length(x)),\length(y)
\end{eqnarray*}\]</span> and <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \nleq(\length(y),\length(x));
\end{eqnarray*}\]</span> by transitivity, we thus also have <span class="math display">\[\nleq(\next(\length(x)),\length(x)),\]</span> a contradiction. So in fact <span class="math inline">\(a = b\)</span>. Thus we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cons(b,v),\cons(a,x)) \\
 &amp; = &amp; \sublist(v,x)
\end{eqnarray*}\]</span> and <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cons(a,x),\cons(b,v)) \\
 &amp; = &amp; \sublist(x,v),
\end{eqnarray*}\]</span> so that (by the induction hypothesis) we have <span class="math inline">\(x = v\)</span>, and so <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \cons(a,x) \\
 &amp; = &amp; \cons(b,v) \\
 &amp; = &amp; y
\end{eqnarray*}\]</span> as needed.</li>
<li>We proceed by list induction on <span class="math inline">\(z\)</span>. For the base case <span class="math inline">\(z = \nil\)</span>, note that if <span class="math inline">\(\sublist(y,z) = \btrue\)</span> we have <span class="math inline">\(y = \nil\)</span>, and then if <span class="math inline">\(\sublist(x,y) = \btrue\)</span> we also have <span class="math inline">\(x = \nil\)</span>. In particular, <span class="math inline">\(\sublist(x,z) = \btrue\)</span> as needed. For the inductive step, suppose the implication holds for all <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> for some <span class="math inline">\(z\)</span>, and let <span class="math inline">\(c \in A\)</span>. Suppose further that <span class="math inline">\(\sublist(x,y)\)</span> and <span class="math inline">\(\sublist(y,\cons(c,z))\)</span>. We consider two cases for <span class="math inline">\(y\)</span>. If <span class="math inline">\(y = \nil\)</span>, note that <span class="math inline">\(x = \nil\)</span>, so we have <span class="math inline">\(\sublist(x,\cons(c,z))\)</span> as claimed. Suppose instead that <span class="math inline">\(y = \cons(b,v)\)</span>. If <span class="math inline">\(b \neq c\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cons(b,v),\cons(c,z)) \\
 &amp; = &amp; \sublist(\cons(b,v),z);
\end{eqnarray*}\]</span> by the inductive hypothesis, we have <span class="math inline">\(\sublist(x,z)\)</span>, so that <span class="math inline">\(\sublist(x,\cons(c,z))\)</span> as claimed. Suppose instead that <span class="math inline">\(b = c\)</span>; then we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cons(b,v),\cons(c,z)) \\
 &amp; = &amp; \sublist(v,z).
\end{eqnarray*}\]</span> We consider two cases for <span class="math inline">\(x\)</span>; if <span class="math inline">\(x = \nil\)</span>, then <span class="math inline">\(\sublist(x,\cons(c,z))\)</span> as claimed. Suppose instead that <span class="math inline">\(x = \cons(a,u)\)</span>. If <span class="math inline">\(a \neq b\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cons(a,u),\cons(b,v)) \\
 &amp; = &amp; \sublist(\cons(a,u),v),
\end{eqnarray*}\]</span> and by the inductive hypothesis, <span class="math inline">\(\sublist(x,z)\)</span>, so that <span class="math inline">\(\sublist(x,\cons(c,z))\)</span> as claimed. If <span class="math inline">\(a = b\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cons(a,u),\cons(b,v)) \\
 &amp; = &amp; \sublist(u,v).
\end{eqnarray*}\]</span> By the inductive hypothesis, <span class="math inline">\(\sublist(u,z)\)</span>, so that <span class="math inline">\(\sublist(x,\cons(c,z))\)</span> as claimed.</li>
</ol>
</p>
</div>
</div>
<p><span class="math inline">\(\sublist\)</span> interacts with <span class="math inline">\(\snoc\)</span>:</p>
<div class="result">
<div class="thm">
<p>
<p>Let <span class="math inline">\(A\)</span> be a set with <span class="math inline">\(a \in A\)</span> and <span class="math inline">\(x,y \in \lists{A}\)</span>. We have the following.</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(\sublist(\snoc(a,x),\nil) = \bfalse\)</span>.</li>
<li><span class="math inline">\(\sublist(x,y) = \sublist(\snoc(a,x),\snoc(a,y))\)</span>.</li>
</ol>
</p>
</div>
<div class="proof">
<p>
<ol style="list-style-type: decimal">
<li>Note that <span class="math inline">\(\snoc(a,x) = \cons(b,u)\)</span> for some <span class="math inline">\(b \in A\)</span> and <span class="math inline">\(u \in \lists{A}\)</span>; then <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\snoc(a,x),\nil) \\
 &amp; = &amp; \sublist(\cons(b,u),\nil) \\
 &amp; = &amp; \isnil(\cons(b,u)) \\
 &amp; = &amp; \bfalse
\end{eqnarray*}\]</span> as claimed.</li>
<li>We proceed by list induction on <span class="math inline">\(x\)</span>. For the base case <span class="math inline">\(x = \nil\)</span>, note that <span class="math inline">\(\sublist(x,y) = \btrue\)</span>. We show that <span class="math inline">\(\sublist(\snoc(a,\nil),\snoc(a,y)) = \btrue\)</span> by list induction on <span class="math inline">\(y\)</span>. For the base case <span class="math inline">\(y = \nil\)</span>, we have <span class="math display">\[\sublist(\snoc(a,\nil),\snoc(a,\nil)) = \btrue\]</span> by reflexivity. For the inductive step (on <span class="math inline">\(y\)</span>), suppose the equality holds for some <span class="math inline">\(y\)</span> and let <span class="math inline">\(b \in A\)</span>. Now <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\snoc(a,\nil),\snoc(a,\cons(b,y))) \\
 &amp; = &amp; \sublist(\cons(a,\nil),\cons(b,\snoc(a,y))) \\
 &amp; = &amp; \bif{\beq(a,b)}{\sublist(\nil,\snoc(a,y))}{\sublist(\cons(a,\nil),\snoc(a,y))} \\
 &amp; = &amp; \bif{\beq(a,b)}{\btrue}{\sublist(\snoc(a,\nil),\snoc(a,y))} \\
 &amp; = &amp; \bif{\beq(a,b)}{\btrue}{\btrue} \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as needed. For the inductive step (on <span class="math inline">\(x\)</span>), suppose the equality holds for some <span class="math inline">\(x\)</span> and let <span class="math inline">\(c \in A\)</span>. We need to show that <span class="math display">\[\sublist(\cons(c,x),y) = \sublist(\snoc(a,\cons(c,x)),\snoc(a,y))\]</span> for all <span class="math inline">\(y\)</span>; we again proceed by list induction on <span class="math inline">\(y\)</span>. For the base case <span class="math inline">\(y = \nil\)</span>, note that <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\cons(c,x),y) \\
 &amp; = &amp; \sublist(\cons(c,x),\nil) \\
 &amp; = &amp; \isnil(\cons(c,x)) \\
 &amp; = &amp; \bfalse,
\end{eqnarray*}\]</span> and likewise <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\snoc(a,\cons(c,x)),\snoc(a,y)) \\
 &amp; = &amp; \sublist(\snoc(a,\cons(c,x)),\snoc(a,\nil)) \\
 &amp; = &amp; \sublist(\cons(c,\snoc(a,x)),\cons(a,\nil)) \\
 &amp; = &amp; \bif{\beq(c,a)}{\sublist(\snoc(a,x),\nil)}{\sublist(\cons(c,\snoc(a,x)),\nil)} \\
 &amp; = &amp; \bif{\beq(c,a)}{\bfalse}{\bfalse} \\
 &amp; = &amp; \bfalse
\end{eqnarray*}\]</span> as needed. For the inductive step (on <span class="math inline">\(y\)</span>), suppose we have <span class="math display">\[\sublist(\cons(c,x),y) = \sublist(\snoc(a,\cons(c,x)),\snoc(a,y))\]</span> for some <span class="math inline">\(y\)</span>, and let <span class="math inline">\(b \in A\)</span>. Using both the outer and nested inductive hypotheses we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\snoc(a,\cons(c,x)),\snoc(a,\cons(b,y))) \\
 &amp; = &amp; \sublist(\cons(c,\snoc(a,x)),\cons(b,\snoc(a,y))) \\
 &amp; = &amp; \bif{\beq(c,b)}{\sublist(\snoc(a,x),\snoc(a,y))}{\sublist(\cons(c,\snoc(a,x)),\snoc(a,y))} \\
 &amp; = &amp; \bif{\beq(c,b)}{\sublist(x,y)}{\sublist(\snoc(a,\cons(c,x)),\snoc(a,y))} \\
 &amp; = &amp; \bif{\beq(c,b)}{\sublist(x,y)}{\sublist(\cons(c,x),y)} \\
 &amp; = &amp; \sublist(\cons(c,x),\cons(b,y))
\end{eqnarray*}\]</span> as needed.</li>
</ol>
</p>
</div>
</div>
<p><span class="math inline">\(\sublist\)</span> interacts with <span class="math inline">\(\cat\)</span>:</p>
<div class="result">
<div class="thm">
<p>
<p>Let <span class="math inline">\(A\)</span> be a set. The following hold for all <span class="math inline">\(x,y,u,v \in \lists{A}\)</span>.</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(\sublist(x,y) = \sublist(\cat(u,x),\cat(u,y))\)</span>.</li>
<li><span class="math inline">\(\sublist(x,y) = \sublist(\cat(x,u),\cat(y,u))\)</span>.</li>
<li>If <span class="math inline">\(\sublist(x,u)\)</span> and <span class="math inline">\(\sublist(y,v)\)</span>, then <span class="math inline">\(\sublist(\cat(x,y),\cat(u,v))\)</span>.</li>
</ol>
</p>
</div>
<div class="proof">
<p>
<ol style="list-style-type: decimal">
<li>We proceed by list induction on <span class="math inline">\(u\)</span>. For the base case <span class="math inline">\(u = \nil\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\cat(u,x),\cat(u,y)) \\
 &amp; = &amp; \sublist(\cat(\nil,x),\cat(\nil,y)) \\
 &amp; = &amp; \sublist(x,y)
\end{eqnarray*}\]</span> as needed. For the inductive step, suppose the equality holds for some <span class="math inline">\(u\)</span> and let <span class="math inline">\(a \in A\)</span>. Now <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(x,y) \\
 &amp; = &amp; \sublist(\cat(u,x),\cat(u,y)) \\
 &amp; = &amp; \sublist(\cons(a,\cat(u,x)),\cons(a,\cat(u,y))) \\
 &amp; = &amp; \sublist(\cat(\cons(a,u),x),\cat(\cons(a,u),y))
\end{eqnarray*}\]</span> as needed.</li>
<li>We proceed by list induction on <span class="math inline">\(u\)</span>. For the base case <span class="math inline">\(u = \nil\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\cat(x,u),\cat(y,u)) \\
 &amp; = &amp; \sublist(\cat(x,\nil),\cat(y,\nil)) \\
 &amp; = &amp; \sublist(x,y)
\end{eqnarray*}\]</span> as needed. For the inductive step, suppose the equality holds for some <span class="math inline">\(u\)</span> and let <span class="math inline">\(a \in A\)</span>. Now we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(x,y) \\
 &amp; = &amp; \sublist(\snoc(a,x),\snoc(a,y)) \\
 &amp; = &amp; \sublist(\cat(\snoc(a,x),u),\cat(\snoc(a,y),u)) \\
 &amp; = &amp; \sublist(\cat(x,\cons(a,u)),\cat(y,\cons(a,u)))
\end{eqnarray*}\]</span> as needed.</li>
<li>If <span class="math inline">\(\sublist(x,u) = \btrue\)</span>, then <span class="math inline">\(\sublist(\cat(x,y),\cat(u,y)) = \btrue\)</span>. Similarly, if <span class="math inline">\(\sublist(y,v) = \btrue\)</span>, then <span class="math inline">\(\sublist(\cat(u,y),\cat(u,v)) = \btrue\)</span>. By transitivity, we have <span class="math display">\[\sublist(\cat(x,y),cat(u,v)) = \btrue\]</span> as claimed.</li>
</ol>
</p>
</div>
</div>
<p>Another lemma.</p>
<div class="result">
<div class="thm">
<p>
Let <span class="math inline">\(A\)</span> be a set. For all <span class="math inline">\(a,b \in A\)</span> and <span class="math inline">\(x,y \in \lists{A}\)</span> we have <span class="math display">\[\sublist(\snoc(a,x),\snoc(b,y)) = \left\{ \begin{array}{ll} \sublist(x,y) &amp; \mathrm{if}\ \beq(a,b) \\ \sublist(\snoc(a,x),y) &amp; \mathrm{otherwise}. \end{array} \right.\]</span>
</p>
</div>
<div class="proof">
<p>
<p>We’ve already seen that <span class="math display">\[\sublist(\snoc(a,x),\snoc(a,y)) = \sublist(x,y).\]</span> So it suffices to show that if <span class="math inline">\(a \neq b\)</span> we have <span class="math display">\[\sublist(\snoc(a,x),\snoc(b,y)) = \sublist(\snoc(a,x),y).\]</span> We proceed by list induction on <span class="math inline">\(y\)</span>. For the base case <span class="math inline">\(y = \nil\)</span>, note that <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\snoc(a,x),y) \\
 &amp; = &amp; \sublist(\snoc(a,x),\nil) \\
 &amp; = &amp; \isnil(\snoc(a,x)) \\
 &amp; = &amp; \bfalse.
\end{eqnarray*}\]</span> We will now show that <span class="math inline">\(\sublist(\snoc(a,x),\snoc(b,\nil)) = \bfalse\)</span> by considering two cases for <span class="math inline">\(x\)</span>. If <span class="math inline">\(x = nil\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\snoc(a,x),\snoc(b,\nil)) \\
 &amp; = &amp; \sublist(\snoc(a,\nil),\snoc(b,\nil)) \\
 &amp; = &amp; \sublist(\cons(a,\nil),\cons(b,\nil)) \\
 &amp; = &amp; \sublist(\cons(a,\nil),\nil) \\
 &amp; = &amp; \isnil(\cons(a,\nil)) \\
 &amp; = &amp; \bfalse
\end{eqnarray*}\]</span> as needed. If <span class="math inline">\(x = \cons(c,u)\)</span> and <span class="math inline">\(\sublist(\snoc(a,x),\snoc(b,\nil)) = \btrue\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \nleq(\length(\snoc(a,x)),\length(\snoc(b,\nil)) \\
 &amp; = &amp; \nleq(\next(\length(x)),\next(\length(\nil))) \\
 &amp; = &amp; \nleq(\next(\length(\cons(c,u))),\next(\zero)) \\
 &amp; = &amp; \nleq(\next(\next(\length(u))),\next(\zero)) \\
 &amp; = &amp; \bfalse,
\end{eqnarray*}\]</span> a contradiction.</p>
Now for the inductive step, suppose the equality holds for some <span class="math inline">\(y\)</span>. That is, for all <span class="math inline">\(a \neq b\)</span> and all <span class="math inline">\(x\)</span> we have <span class="math display">\[\sublist(\snoc(a,x),\snoc(b,y)) = \sublist(\snoc(a,x),y).\]</span> Let <span class="math inline">\(d \in A\)</span>. We consider two possibilities for <span class="math inline">\(x\)</span>. If <span class="math inline">\(x = \nil\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\snoc(a,x),\snoc(b,\cons(d,y))) \\
 &amp; = &amp; \sublist(\snoc(a,\nil),\snoc(b,\cons(d,y))) \\
 &amp; = &amp; \sublist(\cons(a,\nil),\cons(d,\snoc(b,y))) \\
 &amp; = &amp; \bif{\beq(a,d)}{\sublist(\nil,\snoc(b,y))}{\sublist(\cons(a,\nil),\snoc(b,y))} \\
 &amp; = &amp; \bif{\beq(a,d)}{\btrue}{\sublist(\snoc(a,\nil),\snoc(b,y))} \\
 &amp; = &amp; \bif{\beq(a,d)}{\btrue}{\sublist(\snoc(a,\nil),y)} \\
 &amp; = &amp; \bif{\beq(a,d)}{\sublist(\nil,y)}{\sublist(\cons(a,\nil),y)} \\
 &amp; = &amp; \sublist(\cons(a,\nil),\cons(d,y)) \\
 &amp; = &amp; \sublist(\snoc(a,\nil),\cons(d,y))
\end{eqnarray*}\]</span> as needed. Suppose instead that <span class="math inline">\(x = \cons(c,u)\)</span>. Now we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\snoc(a,x),\snoc(b,\cons(d,y))) \\
 &amp; = &amp; \sublist(\snoc(a,\cons(c,u)),\snoc(b,\cons(d,y))) \\
 &amp; = &amp; \sublist(\cons(c,\snoc(a,u)),\cons(d,\snoc(b,y))) \\
 &amp; = &amp; \bif{\beq(c,d)}{\sublist(\snoc(a,u),\snoc(b,y))}{\sublist(\cons(c,\snoc(a,u)),\snoc(b,y))} \\
 &amp; = &amp; \bif{\beq(c,d)}{\sublist(\snoc(a,u),y)}{\sublist(\snoc(a,\cons(c,u)),\snoc(b,y))} \\
 &amp; = &amp; \bif{\beq(c,d)}{\sublist(\snoc(a,u),y)}{\sublist(\snoc(a,\cons(c,u)),y)} \\
 &amp; = &amp; \bif{\beq(c,d)}{\sublist(\snoc(a,u),y)}{\sublist(\cons(c,\snoc(a,u)),y)} \\
 &amp; = &amp; \sublist(\cons(c,\snoc(a,u)),\cons(d,y)) \\
 &amp; = &amp; \sublist(\snoc(a,\cons(c,u)),\cons(d,y)) \\
 &amp; = &amp; \sublist(\snoc(a,x),\cons(d,y))
\end{eqnarray*}\]</span> as needed.
</p>
</div>
</div>
<p><span class="math inline">\(\sublist\)</span> interacts with <span class="math inline">\(\rev\)</span>:</p>
<div class="result">
<div class="thm">
<p>
Let <span class="math inline">\(A\)</span> be a set. For all <span class="math inline">\(x,y \in \lists{A}\)</span> we have <span class="math display">\[\sublist(x,y) = \sublist(\rev(x),\rev(y)).\]</span>
</p>
</div>
<div class="proof">
<p>
We proceed by list induction on <span class="math inline">\(y\)</span>. For the base case <span class="math inline">\(y = \nil\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(x,y) \\
 &amp; = &amp; \sublist(x,\nil) \\
 &amp; = &amp; \isnil(x) \\
 &amp; = &amp; \isnil(\rev(x)) \\
 &amp; = &amp; \sublist(\rev(x),\nil) \\
 &amp; = &amp; \sublist(\rev(x),\rev(\nil)) \\
 &amp; = &amp; \sublist(\rev(x),\rev(y))
\end{eqnarray*}\]</span> as needed. For the inductive step, suppose the equality holds for all <span class="math inline">\(x\)</span> for some <span class="math inline">\(y\)</span> and let <span class="math inline">\(b \in A\)</span>. We consider two possibilities for <span class="math inline">\(x\)</span>. If <span class="math inline">\(x = \nil\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(x,\cons(b,y)) \\
 &amp; = &amp; \sublist(\nil,\cons(b,y)) \\
 &amp; = &amp; \btrue \\
 &amp; = &amp; \sublist(\nil,\rev(\cons(b,y))) \\
 &amp; = &amp; \sublist(\rev(\nil),\rev(\cons(b,y))) \\
 &amp; = &amp; \sublist(\rev(x),\rev(\cons(b,y)))
\end{eqnarray*}\]</span> as needed. Suppose instead that <span class="math inline">\(x = \cons(a,w)\)</span>. Then we have <span class="math display">\[\begin{eqnarray*}
 &amp; = &amp; \sublist(\rev(x),\rev(\cons(b,y))) \\
 &amp; = &amp; \sublist(\rev(\cons(a,w)),\rev(\cons(b,y))) \\
 &amp; = &amp; \sublist(\snoc(a,\rev(w)),\snoc(b,\rev(y))) \\
 &amp; = &amp; \bif{\beq(a,b)}{\sublist(\rev(w),\rev(y))}{\sublist(\snoc(a,\rev(w)),\rev(y))} \\
 &amp; = &amp; \bif{\beq(a,b)}{\sublist(w,y)}{\sublist(\rev(\cons(a,w)),\rev(y))} \\
 &amp; = &amp; \bif{\beq(a,b)}{\sublist(w,y)}{\sublist(\cons(a,w),y)} \\
 &amp; = &amp; \sublist(\cons(a,w),\cons(b,y)) \\
 &amp; = &amp; \sublist(x,\cons(b,y))
\end{eqnarray*}\]</span> as needed.
</p>
</div>
</div>
<p>More <span class="math inline">\(\snoc\)</span>.</p>
<div class="result">
<div class="thm">
<p>
<p>Let <span class="math inline">\(A\)</span> be a set with <span class="math inline">\(a \in A\)</span> and <span class="math inline">\(x,y \in \lists{A}\)</span>. Then we have the following.</p>
<ol style="list-style-type: decimal">
<li>If <span class="math inline">\(\sublist(x,y) = \btrue\)</span>, then <span class="math inline">\(\sublist(x,\snoc(a,y)) = \btrue\)</span>.</li>
<li>If <span class="math inline">\(\sublist(\snoc(a,x),y) = \btrue\)</span>, then <span class="math inline">\(\sublist(x,y) = \btrue\)</span>.</li>
</ol>
</p>
</div>
<div class="proof">
<p>
<ol style="list-style-type: decimal">
<li>Suppose <span class="math inline">\(\sublist(x,y) = \btrue\)</span>. Then we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(x,y) \\
 &amp; = &amp; \sublist(\rev(x),\rev(y)) \\
 &amp; = &amp; \sublist(\rev(x),\cons(a,\rev(y))) \\
 &amp; = &amp; \sublist(\rev(x),\rev(\snoc(a,y))) \\
 &amp; = &amp; \sublist(x,\snoc(a,y))
\end{eqnarray*}\]</span> as claimed.</li>
<li>Suppose <span class="math inline">\(\sublist(\snoc(a,x),y) = \btrue\)</span>. Then we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\snoc(a,x),y) \\
 &amp; = &amp; \sublist(\rev(\snoc(a,x)),\rev(y)) \\
 &amp; = &amp; \sublist(\cons(a,\rev(x)),\rev(y)) \\
 &amp; = &amp; \sublist(\rev(x),\rev(y)) \\
 &amp; = &amp; \sublist(x,y)
\end{eqnarray*}\]</span> as claimed.</li>
</ol>
</p>
</div>
</div>
<p>And again.</p>
<div class="result">
<div class="thm">
<p>
<p>Let <span class="math inline">\(A\)</span> be a set, with <span class="math inline">\(x,y,z \in \lists{A}\)</span>.</p>
<ol style="list-style-type: decimal">
<li>If <span class="math inline">\(\sublist(x,y) = \btrue\)</span>, then <span class="math inline">\(\sublist(x,\cat(z,y)) = \btrue\)</span>.</li>
<li>If <span class="math inline">\(\sublist(x,y) = \btrue\)</span>, then <span class="math inline">\(\sublist(x,\cat(y,z)) = \btrue\)</span>.</li>
<li>If <span class="math inline">\(\sublist(\cat(z,x),y) = \btrue\)</span>, then <span class="math inline">\(\sublist(x,y) = \btrue\)</span>.</li>
<li>If <span class="math inline">\(\sublist(\cat(x,z),y) = \btrue\)</span>, then <span class="math inline">\(\sublist(x,y) = \btrue\)</span>.</li>
</ol>
</p>
</div>
<div class="proof">
<p>
<ol style="list-style-type: decimal">
<li>We proceed by list induction on <span class="math inline">\(z\)</span>. For the base case <span class="math inline">\(z = \nil\)</span>, suppose <span class="math inline">\(\sublist(x,y) = \btrue\)</span>. Then <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(x,\cat(z,y)) \\
 &amp; = &amp; \sublist(x,\cat(\nil,y)) \\
 &amp; = &amp; \sublist(x,y) \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as needed. For the inductive step, suppose the implication holds for some <span class="math inline">\(z\)</span> and let <span class="math inline">\(a \in A\)</span>. Suppose further that <span class="math inline">\(\sublist(x,y) = \btrue\)</span>. Then we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(x,y) \\
 &amp; = &amp; \sublist(x,\cat(z,y)) \\
 &amp; = &amp; \sublist(x,\cons(a,\cat(z,y))) \\
 &amp; = &amp; \sublist(x,\cat(\cons(a,z),y))
\end{eqnarray*}\]</span> as needed.</li>
<li>Suppose <span class="math inline">\(\sublist(x,y) = \btrue\)</span>. Now <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(x,y) \\
 &amp; = &amp; \sublist(\rev(x),\rev(y)) \\
 &amp; = &amp; \sublist(\rev(x),\cat(\rev(z),\rev(y))) \\
 &amp; = &amp; \sublist(\rev(x),\rev(\cat(y,z))) \\
 &amp; = &amp; \sublist(x,\cat(y,z))
\end{eqnarray*}\]</span> as claimed.</li>
<li>We proceed by list induction on <span class="math inline">\(z\)</span>. For the base case <span class="math inline">\(z = \nil\)</span>, suppose <span class="math inline">\(\sublist(\cat(z,x),y) = \btrue\)</span>. Then we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cat(z,x),y) \\
 &amp; = &amp; \sublist(\cat(\nil,x),y) \\
 &amp; = &amp; \sublist(x,y)
\end{eqnarray*}\]</span> as needed. For the inductive step, suppose the implication holds for all <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> for some <span class="math inline">\(z\)</span> and let <span class="math inline">\(a \in A\)</span>. Suppose further that <span class="math inline">\(\sublist(\cat(\cons(a,z),x),y) = \btrue\)</span>. Then we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cat(\cons(a,z),x),y) \\
 &amp; = &amp; \sublist(\cons(a,\cat(z,x)),y) \\
 &amp; = &amp; \sublist(\cat(z,x),y) \\
 &amp; = &amp; \sublist(x,y)
\end{eqnarray*}\]</span> as needed.</li>
<li>Suppose <span class="math inline">\(\sublist(\cat(x,z),y) = \btrue\)</span>. Then we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(\cat(x,z),y) \\
 &amp; = &amp; \sublist(\rev(\cat(x,z)),\rev(y)) \\
 &amp; = &amp; \sublist(\cat(\rev(z),\rev(x)),\rev(y)) \\
 &amp; = &amp; \sublist(\rev(x),\rev(y)) \\
 &amp; = &amp; \sublist(x,y)
\end{eqnarray*}\]</span> as needed.</li>
</ol>
</p>
</div>
</div>
<p><span class="math inline">\(\sublist\)</span> and <span class="math inline">\(\map\)</span>:</p>
<div class="result">
<div class="thm">
<p>
Let <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> be sets with <span class="math inline">\(x,y \in \lists{A}\)</span> and <span class="math inline">\(f : A \rightarrow B\)</span> injective. If <span class="math inline">\(\sublist(x,y) = \btrue\)</span>, then <span class="math inline">\(\sublist(\map(f)(x),\map(f)(y)) = \btrue\)</span>.
</p>
</div>
<div class="proof">
<p>
We proceed by list induction on <span class="math inline">\(y\)</span>. For the base case <span class="math inline">\(y = \nil\)</span>, suppose <span class="math inline">\(\sublist(x,y) = \btrue\)</span>. Then in fact <span class="math inline">\(x = \nil\)</span>. In this case we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\map(f)(x),\map(f)(y)) \\
 &amp; = &amp; \sublist(\map(f)(\nil),\map(f)(\nil)) \\
 &amp; = &amp; \sublist(\nil,\nil) \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as needed. For the inductive step, suppose the implication holds for all <span class="math inline">\(x\)</span> for some <span class="math inline">\(y\)</span> and let <span class="math inline">\(b \in A\)</span>. Suppose further that <span class="math inline">\(\sublist(x,\cons(a,y)) = \btrue\)</span>. We have two possibilities for <span class="math inline">\(x\)</span>. If <span class="math inline">\(x = \nil\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\map(f)(x),\map(f)(\cons(a,y))) \\
 &amp; = &amp; \sublist(\map(f)(\nil),\map(f)(\cons(a,y))) \\
 &amp; = &amp; \sublist(\nil,\map(f)(\cons(a,y))) \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as needed. Suppose instead that <span class="math inline">\(x = \cons(a,u)\)</span>. Note that if <span class="math inline">\(f(a) = f(b)\)</span> then <span class="math inline">\(a = b\)</span> (since <span class="math inline">\(f\)</span> is injective) and we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(x,\cons(b,y)) \\
 &amp; = &amp; \sublist(\cons(a,u),\cons(b,y)) \\
 &amp; = &amp; \sublist(u,y),
\end{eqnarray*}\]</span> and if <span class="math inline">\(f(a) \neq f(b)\)</span>, then <span class="math inline">\(a \neq b\)</span> (since <span class="math inline">\(f\)</span> is injective), and we have <span class="math display">\[\begin{eqnarray*}
 &amp; = &amp; \btrue \\
 &amp; = &amp; \sublist(x,\cons(b,y)) \\
 &amp; = &amp; \sublist(\cons(a,u),\cons(b,y)) \\
 &amp; = &amp; \sublist(\cons(a,u),y) \\
 &amp; = &amp; \sublist(x,y).
\end{eqnarray*}\]</span> In either case, using the inductive hypothesis we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\map(f)(x),\map(f)(\cons(b,y))) \\
 &amp; = &amp; \sublist(\map(f)(\cons(a,u)),\map(f)(\cons(b,y))) \\
 &amp; = &amp; \sublist(\cons(f(a),\map(f)(u)),\cons(f(b),\map(f)(y))) \\
 &amp; = &amp; \bif{\beq(f(a),f(b))}{\sublist(\map(f)(u),\map(f)(y))}{\sublist(\cons(f(a),\map(f)(u)),\map(f)(y)} \\
 &amp; = &amp; \bif{\beq(f(a),f(b))}{\sublist(\map(f)(u),\map(f)(y))}{\sublist(\map(f)(\cons(a,u)),\map(f)(y)} \\
 &amp; = &amp; \bif{\beq(f(a),f(b))}{\sublist(\map(f)(u),\map(f)(y))}{\sublist(\map(f)(x),\map(f)(y)} \\
 &amp; = &amp; \bif{\beq(f(a),f(b))}{\btrue}{\btrue} \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as needed.
</p>
</div>
</div>
<p><span class="math inline">\(\sublist\)</span> and <span class="math inline">\(\filter\)</span>.</p>
<div class="result">
<div class="thm">
<p>
Let <span class="math inline">\(A\)</span> be a set, let <span class="math inline">\(p : A \rightarrow \bool\)</span>, and let <span class="math inline">\(x \in \lists{A}\)</span>. Then we have <span class="math display">\[\sublist(\filter(p,x),x) = \btrue.\]</span>
</p>
</div>
<div class="proof">
<p>
We proceed by list induction on <span class="math inline">\(x\)</span>. For the base case <span class="math inline">\(x = \nil\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\filter(p,x),x) \\
 &amp; = &amp; \sublist(\filter(p,\nil),\nil) \\
 &amp; = &amp; \sublist(\nil,\nil) \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as needed. For the inductive step, suppose the equality holds for all <span class="math inline">\(p\)</span> for some <span class="math inline">\(x\)</span> and let <span class="math inline">\(a \in A\)</span>. We consider two possibilities. If <span class="math inline">\(p(a) = \btrue\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \sublist(\filter(p,\cons(a,x)),\cons(a,x)) \\
 &amp; = &amp; \sublist(\bif{p(a)}{\cons(a,\filter(p,x)}{\filter(p,x)},\cons(a,x)) \\
 &amp; = &amp; \sublist(\cons(a,\filter(p,x)),\cons(a,x)) \\
 &amp; = &amp; \sublist(\filter(p,x),x) \\
 &amp; = &amp; \btrue
\end{eqnarray*}\]</span> as needed. If <span class="math inline">\(p(a) = \bfalse\)</span>, note that <span class="math display">\[\sublist(\filter(p,x),x) = \btrue$, so that
\]</span>
\begin{eqnarray*}
 &amp;   &amp; \sublist(\filter(p,\cons(a,x)),\cons(a,x)) \\
 &amp; = &amp; \sublist(\bif{p(a)}{\cons(a,\filter(p,x)}{\filter(p,x)},\cons(a,x)) \\
 &amp; = &amp; \sublist(\filter(p,x),\cons(a,x)) \\
 &amp; = &amp; \btrue
\end{eqnarray*}
$$ as needed.
</p>
</div>
</div>
<p>Finally, <span class="math inline">\(\sublist\)</span> interacts with <span class="math inline">\(\any\)</span> and <span class="math inline">\(\all\)</span>.</p>
<div class="result">
<div class="thm">
<p>
<p>Let <span class="math inline">\(A\)</span> be a set, let <span class="math inline">\(x,y \in \lists{A}\)</span>, and let <span class="math inline">\(p : A \rightarrow \bool\)</span>. If <span class="math inline">\(\sublist(x,y)= \btrue\)</span>, then we have the following.</p>
<ol style="list-style-type: decimal">
<li>If <span class="math inline">\(\all(p,y) = \btrue\)</span> then <span class="math inline">\(\all(p,x) = \btrue\)</span>.</li>
<li>If <span class="math inline">\(\any(p,x) = \btrue\)</span> then <span class="math inline">\(\any(p,y) = \btrue\)</span>.</li>
</ol>
</p>
</div>
<div class="proof">
<p>
<ol style="list-style-type: decimal">
<li>We proceed by list induction on <span class="math inline">\(y\)</span>. For the base case <span class="math inline">\(y = \nil\)</span>, since <span class="math inline">\(\sublist(x,y) = \btrue\)</span> we have <span class="math inline">\(x = \nil\)</span>. Now <span class="math display">\[\all(p,y) = \all(p,\nil) = \btrue\]</span> and <span class="math display">\[\all(p,x) = \all(p,\nil) = \btrue\]</span> as needed. For the inductive step, suppose the result holds for all <span class="math inline">\(x\)</span> for some <span class="math inline">\(y\)</span>, and let <span class="math inline">\(b \in A\)</span>. Suppose <span class="math inline">\(\sublist(x,\cons(b,y)) = \btrue\)</span>, and further suppose that <span class="math inline">\(\all(p,\cons(b,y)) = \btrue\)</span>. In particular, note that <span class="math inline">\(p(b) = \btrue\)</span>. We consider two possibilities for <span class="math inline">\(x\)</span>. If <span class="math inline">\(x = \nil\)</span>, note that <span class="math display">\[\all(p,x) = \all(p,\nil) = \btrue,\]</span> so the implication holds regardless of <span class="math inline">\(y\)</span>. Suppose instead that <span class="math inline">\(x = \cons(a,u)\)</span>. Now <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \sublist(x,\cons(b,y)) \\
 &amp; = &amp; \sublist(\cons(a,u),\cons(b,y)) \\
 &amp; = &amp; \bif{\beq(a,b)}{\sublist(u,y)}{\sublist(\cons(a,u),y)} \\
 &amp; = &amp; \bif{\beq(a,b)}{\all(p,u)}{\all(p,\cons(a,u))} \\
 &amp; = &amp; \bif{\beq(a,b)}{\all(p,\cons(a,u))}{\all(p,\cons(a,u))} \\
 &amp; = &amp; \all(p,\cons(a,u)) \\
 &amp; = &amp; \all(p,x)
\end{eqnarray*}\]</span> as needed.</li>
<li>We prove this implication by contraposition. Suppose <span class="math inline">\(\any(p,y) = \bfalse\)</span>; then we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \btrue \\
 &amp; = &amp; \bnot(\bfalse) \\
 &amp; = &amp; \bnot(\any(p,y)) \\
 &amp; = &amp; \all(\bnot \circ p, y).
\end{eqnarray*}\]</span> Using (1), we thus have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \bfalse \\
 &amp; = &amp; \bnot(\btrue) \\
 &amp; = &amp; \bnot(\all(\bnot \circ p,x)) \\
 &amp; = &amp; \bnot(\bnot(\any(p,x))) \\
 &amp; = &amp; \any(p,x)
\end{eqnarray*}\]</span> as needed.</li>
</ol>
</p>
</div>
</div>
<p>One more.</p>
<div class="result">
<div class="thm">
<p>
Let <span class="math inline">\(A\)</span> be a set with <span class="math inline">\(x,y \in \lists{A}\)</span>. If <span class="math inline">\(\sublist(x,y) = \btrue\)</span>, then <span class="math inline">\(\beq(\cons(a,y),x) = \bfalse\)</span>.
</p>
</div>
<div class="proof">
<p>
We proceed by list induction on <span class="math inline">\(x\)</span>. For the base case <span class="math inline">\(x = \nil\)</span>, note that <span class="math display">\[\sublist(x,y) = \sublist(\nil,y) = \btrue\]</span> and <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \beq(\cons(a,y),x) \\
 &amp; = &amp; \beq(\cons(a,y),\nil) \\
 &amp; = &amp; \bfalse
\end{eqnarray*}\]</span> as needed. For the inductive step, suppose the implication holds for all <span class="math inline">\(a\)</span> and <span class="math inline">\(y\)</span> for some <span class="math inline">\(x\)</span> and let <span class="math inline">\(b \in A\)</span>. We now consider two possibilities for <span class="math inline">\(y\)</span>. If <span class="math inline">\(y = \nil\)</span>, note that <span class="math display">\[\sublist(\cons(b,x),y) = \sublist(\cons(b,x),\nil) = \bfalse,\]</span> so the implication holds vacuously. Suppose instead that <span class="math inline">\(y = \cons(c,w)\)</span>. Suppose further that <span class="math inline">\(\sublist(\cons(b,x),y) = \btrue\)</span>. We consider two possibilities. If <span class="math inline">\(a \neq b\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \beq(\cons(a,y),\cons(b,w)) \\
 &amp; = &amp; \beq(\cons(a,\cons(c,w)),\cons(b,x)) \\
 &amp; = &amp; \band(\beq(a,b),\beq(\cons(c,w),x)) \\
 &amp; = &amp; \band(\bfalse,\beq(\cons(c,w),x)) \\
 &amp; = &amp; \bfalse
\end{eqnarray*}\]</span> as needed. Suppose instead that <span class="math inline">\(a = b\)</span>. We now consider two possibilities. If <span class="math inline">\(b = c\)</span>, then since <span class="math inline">\(\sublist(\cons(b,x),\cons(c,w)) = \btrue\)</span>, we have <span class="math inline">\(\sublist(x,w) = \btrue\)</span>. Using the inductive hypothesis on <span class="math inline">\(x\)</span> we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \beq(\cons(a,\cons(c,w)),\cons(b,x)) \\
 &amp; = &amp; \band(\beq(a,b),\beq(\cons(c,w),x)) \\
 &amp; = &amp; \band(\btrue,\beq(\cons(c,w),x)) \\
 &amp; = &amp; \beq(\cons(c,w),x) \\
 &amp; = &amp; \bfalse
\end{eqnarray*}\]</span> as needed. Suppose instead that <span class="math inline">\(b \neq c\)</span>. Now since <span class="math inline">\(\sublist(\cons(b,x),\cons(c,w)) = \btrue\)</span>, we have <span class="math inline">\(\sublist(\cons(b,x),w) = \btrue\)</span>, and thus <span class="math inline">\(\sublist(x,w) = \btrue\)</span>. Using the inductive hypothesis on <span class="math inline">\(x\)</span>, we have <span class="math display">\[\begin{eqnarray*}
 &amp;   &amp; \beq(\cons(a,\cons(c,w)),\cons(b,x)) \\
 &amp; = &amp; \band(\beq(a,b),\beq(\cons(c,w),x)) \\
 &amp; = &amp; \band(\btrue,\beq(\cons(c,w),x)) \\
 &amp; = &amp; \beq(\cons(c,w),x) \\
 &amp; = &amp; \bfalse
\end{eqnarray*}\]</span> as needed.
</p>
</div>
</div>
<h2 id="testing">Testing</h2>
<p>Here are our property tests for <span class="math inline">\(\sublist\)</span>:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; _test_sublist_alt ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (<span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_alt _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist'(x,y) == sublist(x,y)&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \x y <span class="ot">-&gt;</span> (sublist' x y) <span class="fu">====</span> (sublist x y)
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt; _test_sublist_cons ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_cons _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist(x,y) == sublist(cons(a,x),cons(a,y))&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \a x y <span class="ot">-&gt;</span> (sublist (cons a x) (cons a y)) <span class="fu">====</span> (sublist x y)
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt; _test_sublist_cons_left ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_cons_left _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist(cons(a,x),y) ==&gt; sublist(x,y)&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \a x y <span class="ot">-&gt;</span> <span class="kw">if</span> sublist (cons a x) y
<span class="ot">&gt;</span>     <span class="kw">then</span> sublist x y
<span class="ot">&gt;</span>     <span class="kw">else</span> <span class="dt">True</span>
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt; _test_sublist_cons_right ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_cons_right _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist(x,y) ==&gt; sublist(x,cons(a,y))&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \a x y <span class="ot">-&gt;</span> <span class="kw">if</span> sublist x y
<span class="ot">&gt;</span>     <span class="kw">then</span> sublist x (cons a y)
<span class="ot">&gt;</span>     <span class="kw">else</span> <span class="dt">True</span>
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt; _test_sublist_reflexive ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (<span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_reflexive _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist(x,x) == true&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \x <span class="ot">-&gt;</span> (sublist x x) <span class="fu">====</span> <span class="dt">True</span>
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt; _test_sublist_antisymmetric ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (<span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_antisymmetric _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist(x,y) &amp; sublist(y,x) ==&gt; eq(x,y)&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \x y <span class="ot">-&gt;</span> ((sublist x y) <span class="fu">&amp;&amp;&amp;</span> (sublist y x)) <span class="fu">====</span> (eq x y)
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt; _test_sublist_transitive ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (<span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_transitive _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist(x,y) &amp; sublist(y,z) ==&gt; sublist(x,z)&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \x y z <span class="ot">-&gt;</span> <span class="kw">if</span> (sublist x y) <span class="fu">&amp;&amp;&amp;</span> (sublist y z)
<span class="ot">&gt;</span>     <span class="kw">then</span> sublist x z
<span class="ot">&gt;</span>     <span class="kw">else</span> <span class="dt">True</span>
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt; _test_sublist_snoc_nil ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_snoc_nil _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist(snoc(a,x),nil) == false&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \a x <span class="ot">-&gt;</span> (sublist (snoc a x) nil) <span class="fu">====</span> <span class="dt">False</span>
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt; _test_sublist_rev ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (<span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_rev _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist(x,y) == sublist(rev(x),rev(y))&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \x y <span class="ot">-&gt;</span> (sublist x y) <span class="fu">====</span> (sublist (rev x) (rev y))
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt; _test_sublist_cat_left ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (<span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_cat_left _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist(x,y) ==&gt; sublist(cat(u,x),cat(u,y))&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \x y u <span class="ot">-&gt;</span> <span class="kw">if</span> sublist x y
<span class="ot">&gt;</span>     <span class="kw">then</span> sublist (cat u x) (cat u y)
<span class="ot">&gt;</span>     <span class="kw">else</span> <span class="dt">True</span>
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt; _test_sublist_cat_right ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (<span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_cat_right _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist(x,y) ==&gt; sublist(cat(x,u),cat(y,u))&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \x y u <span class="ot">-&gt;</span> <span class="kw">if</span> sublist x y
<span class="ot">&gt;</span>     <span class="kw">then</span> sublist (cat x u) (cat y u)
<span class="ot">&gt;</span>     <span class="kw">else</span> <span class="dt">True</span>
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span> 
<span class="ot">&gt; _test_sublist_cat ::</span> (<span class="dt">List</span> t, <span class="dt">Equal</span> a)
<span class="ot">&gt;</span>   <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Test</span> (<span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">ListOf</span> t a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)
<span class="ot">&gt;</span> _test_sublist_cat _ <span class="fu">=</span>
<span class="ot">&gt;</span>   testName <span class="st">&quot;sublist(x,y) &amp; sublist(u,v) ==&gt; sublist(cat(x,u),cat(y,v))&quot;</span> <span class="fu">$</span>
<span class="ot">&gt;</span>   \x y u v <span class="ot">-&gt;</span> <span class="kw">if</span> (sublist x y) <span class="fu">&amp;&amp;&amp;</span> (sublist u v)
<span class="ot">&gt;</span>     <span class="kw">then</span> sublist (cat x u) (cat y v)
<span class="ot">&gt;</span>     <span class="kw">else</span> <span class="dt">True</span></code></pre></div>
<p>And the suite:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt;</span> <span class="co">-- run all tests for sublist</span>
<span class="ot">&gt; _test_sublist ::</span>
<span class="ot">&gt;</span>   ( <span class="dt">TypeName</span> a, <span class="dt">Equal</span> a, <span class="dt">Show</span> a, <span class="dt">Arbitrary</span> a, <span class="dt">CoArbitrary</span> a
<span class="ot">&gt;</span>   , <span class="dt">TypeName</span> (t a), <span class="dt">List</span> t
<span class="ot">&gt;</span>   ) <span class="ot">=&gt;</span> t a <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()
<span class="ot">&gt;</span> _test_sublist t maxSize numCases <span class="fu">=</span> <span class="kw">do</span>
<span class="ot">&gt;</span>   testLabel (<span class="st">&quot;sublist: &quot;</span> <span class="fu">++</span> typeName t)
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span>   <span class="kw">let</span>
<span class="ot">&gt;</span>     args <span class="fu">=</span> stdArgs
<span class="ot">&gt;</span>       { maxSuccess <span class="fu">=</span> numCases
<span class="ot">&gt;</span>       , maxSize    <span class="fu">=</span> maxSize
<span class="ot">&gt;</span>       }
<span class="ot">&gt;</span> 
<span class="ot">&gt;</span>   runTest args (_test_sublist_alt t)
<span class="ot">&gt;</span>   runTest args (_test_sublist_cons t)
<span class="ot">&gt;</span>   runTest args (_test_sublist_cons_left t)
<span class="ot">&gt;</span>   runTest args (_test_sublist_cons_right t)
<span class="ot">&gt;</span>   runTest args (_test_sublist_reflexive t)
<span class="ot">&gt;</span>   runTest args (_test_sublist_antisymmetric t)
<span class="ot">&gt;</span>   runTest args (_test_sublist_transitive t)
<span class="ot">&gt;</span>   runTest args (_test_sublist_snoc_nil t)
<span class="ot">&gt;</span>   runTest args (_test_sublist_rev t)
<span class="ot">&gt;</span>   runTest args (_test_sublist_cat_left t)
<span class="ot">&gt;</span>   runTest args (_test_sublist_cat_right t)
<span class="ot">&gt;</span>   runTest args (_test_sublist_cat t)</code></pre></div>
<p>And <code>main</code>:</p>
<div class="sourceCode"><pre class="sourceCode literate literatehaskell"><code class="sourceCode literatehaskell"><span class="ot">&gt; main_sublist ::</span> <span class="dt">IO</span> ()
<span class="ot">&gt;</span> main_sublist <span class="fu">=</span> <span class="kw">do</span>
<span class="ot">&gt;</span>   _test_sublist (<span class="ot">nil ::</span> <span class="dt">ConsList</span> <span class="dt">Bool</span>)  <span class="dv">30</span> <span class="dv">200</span>
<span class="ot">&gt;</span>   _test_sublist (<span class="ot">nil ::</span> <span class="dt">ConsList</span> <span class="dt">Unary</span>) <span class="dv">30</span> <span class="dv">200</span></code></pre></div>


<!-- END BODY -->
</div>

<div id="footer">
  Site generated by
  <a href="http://jaspervdj.be/hakyll">Hakyll</a>
</div>
</body>
</html>

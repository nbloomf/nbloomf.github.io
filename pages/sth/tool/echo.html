<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>nbloomf.github.io - Software Tools in Haskell: echo</title>
<link rel="stylesheet" type="text/css" href="../../../css/default.css" />
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>

<body>
<div id="header">
  <div id="logo">
    <a href="../../../index.html">nbloomf</a>
  </div>
  <div id="navigation">
    <a href="../../../index.html">Home</a>
    <a href="../../../about.html">About</a>
    <a href="../../../projects.html">Projects</a>
    <a href="../../../contact.html">Contact</a>
    <a href="../../../archive.html">Blog</a>
  </div>
</div>

<div id="content">
<h1>Software Tools in Haskell: echo</h1>
<!-- BEGIN BODY -->
<div class="subtitle">
<h2>write arguments to stdout</h2>
This page is part of a series on <a href="../../../pages/sth/index.html">Software Tools in Haskell</a>.
</div>

<p>All the programs we’ve written so far are strictly <em>filters</em>: they read data from stdin and write data to stdout. The metaphor here is that small programs are chained together in a larger “pipeline”, and data flows from one end to the other; along the way, each filter changes the data in some way. By reading and writing from stdin and stdout, individual programs do not need to worry about where their data comes from and goes.</p>
<p><code>echo</code> is the first program we’ve written that <em>produces</em> data without needing to take any from stdin; it is a <em>source</em>. (The converse, a program which consumes data without producing any, is a <em>sink</em>). <code>echo</code> simply takes a list of arguments at the command line and writes them to stdout. Although this is simple, like <code>copy</code>, we have to decide how to interpret the arguments to <code>echo</code>. By default, <code>echo</code> will treat its arguments as lines and write one per line. We use the <code>--char</code> argument to write raw characters.</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="co">-- sth-echo: write arguments to stdout</span>

<span class="kw">module</span> <span class="dt">Main</span> <span class="kw">where</span>

<span class="kw">import </span><span class="dt">System.Exit</span> (exitSuccess)
<span class="kw">import </span><span class="dt">System.Environment</span> (getArgs)
<span class="kw">import </span><span class="dt">STH.Lib</span> (putStrLns)

<span class="ot">main ::</span> <span class="dt">IO</span> ()
main <span class="fu">=</span> <span class="kw">do</span>
  args <span class="ot">&lt;-</span> getArgs

  <span class="kw">case</span> args <span class="kw">of</span>
    (<span class="st">&quot;--char&quot;</span><span class="fu">:</span>xs) <span class="ot">-&gt;</span> putStr (concat xs)
    xs            <span class="ot">-&gt;</span> putStrLns xs

  exitSuccess</code></pre></div>
<p>We can now use <code>echo</code> to test our other programs. For instance, using the shell to run</p>
<pre><code>sth-echo &quot;hello&quot; | sth-count --char</code></pre>
<p>prints <code>6</code> to the terminal (including the trailing newline). Woo! But if we run</p>
<pre><code>sth-echo --char &quot;hello&quot; | sth-count --char</code></pre>
<p>we get <code>5</code>.</p>
<!-- END BODY -->
</div>

<div id="footer">
  Site generated by
  <a href="http://jaspervdj.be/hakyll">Hakyll</a>
</div>
</body>
</html>
